<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Material Design for Bootstrap</title>
    <!-- MDB icon -->
    <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <!-- Google Fonts Roboto -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap"
    />
    <!-- MDB -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mdb.min.css')}}" />
  </head>
  <body>
    <!-- Start your project here-->
    <form action="" method="post" name="loginform">
      <!-- Email input -->
      <div class="form-outline mx-1 my-1">
        <input type="text" id="form2Example1" class="form-control" name = "username"/>
        <label class="form-label" for="form2Example1">Username</label>
      </div>
    
      <!-- Password input -->
      <div class="form-outline mx-1 my-1">
        <input type="password" id="form2Example2" class="form-control" name = "password"/>
        <label class="form-label" for="form2Example2">Password</label>
      </div>
    
      <!-- 2 column grid layout for inline styling -->
      <div class="row mb-4">
        <div class="col d-flex justify-content-center">
          <!-- Checkbox -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="form2Example31" checked />
            <label class="form-check-label" for="form2Example31"> Remember me </label>
          </div>
        </div>
    
        <div class="col">
          <!-- Simple link -->
          <a href="#!">Forgot password?</a>
        </div>
      </div>
    
      <!-- Submit button -->
      <button type="button" class="btn btn-primary btn-block mx-1 my-1">Sign in</button>
    
      <!-- Register buttons -->
      <div class="text-center">
        <p>Not a member? <a href="#!">Register</a></p>
        <p>or sign up with:</p>
        <button type="button" class="btn btn-link btn-floating mx-1">
          <i class="fab fa-facebook-f"></i>
        </button>
    
        <button type="button" class="btn btn-link btn-floating mx-1">
          <i class="fab fa-google"></i>
        </button>
    
        <button type="button" class="btn btn-link btn-floating mx-1">
          <i class="fab fa-twitter"></i>
        </button>
    
        <button type="button" class="btn btn-link btn-floating mx-1">
          <i class="fab fa-github"></i>
        </button>
      </div>
    </form>
    <!-- End your project here-->

    <!-- MDB -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/mdb.min.js')}}"></script>
    <!-- Custom scripts -->
    <script type="text/javascript">
      const HostURL = 'http://192.168.119.132:5000';
      login();
      function login() {
        let LoginForm = document.forms['loginform'];
        let username = LoginForm.elements['username']
        let password = LoginForm.elements['password']

        submitButton.addEventListener('click', function(e) {
          let data = {
                'username': username,  
                'password': password
            }

            fetch(HostURL + '/login', {
                method: 'POST',
                mode: 'cors',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => validation(data))
        })
      }

      function validation(msg) {
        if (msg['status'] == 200) {
            location.replace(HostURL + '/home');
        } else {
            textNode = document.createTextNode(message['msg']);
            alertMessage.classList.add('alert-danger');
        }
      }
    </script>
  </body>
</html>